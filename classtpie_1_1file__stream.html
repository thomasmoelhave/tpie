<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>tpie::file_stream&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="madalgo-doxygen.css" rel="stylesheet" type="text/css"/>
<link href="printstyle.css" rel="stylesheet" type="text/css" media="print" />
</head>
<body>
<div id="top">
<div id="titlearea">
<h1 id="projectname">TPIE</h1>
<span class="version"><a href="//github.com/thomasmoelhave/tpie/tree/4739728">4739728</a></span>
</div>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classtpie_1_1file__stream.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classtpie_1_1file__stream-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tpie::file_stream&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Compressed stream.  
 <a href="classtpie_1_1file__stream.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="compressed_2stream_8h_source.html">tpie/compressed/stream.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a23cd70ae4df63ae6fcb0be8b898edf59"><td class="memItemLeft" align="right" valign="top"><a id="a23cd70ae4df63ae6fcb0be8b898edf59"></a>
typedef T&#160;</td><td class="memItemRight" valign="bottom"><b>item_type</b></td></tr>
<tr class="separator:a23cd70ae4df63ae6fcb0be8b898edf59"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae7ae6436ea9cfd9653f74ef813d31e0b"><td class="memItemLeft" align="right" valign="top"><a id="ae7ae6436ea9cfd9653f74ef813d31e0b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>file_stream</b> (double blockFactor=1.0)</td></tr>
<tr class="separator:ae7ae6436ea9cfd9653f74ef813d31e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5f0c0a38832561a99d1478377cd1eb9"><td class="memItemLeft" align="right" valign="top">const T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtpie_1_1file__stream.html#af5f0c0a38832561a99d1478377cd1eb9">read</a> ()</td></tr>
<tr class="memdesc:af5f0c0a38832561a99d1478377cd1eb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads next item from stream if can_read() == true.  <a href="classtpie_1_1file__stream.html#af5f0c0a38832561a99d1478377cd1eb9">More...</a><br /></td></tr>
<tr class="separator:af5f0c0a38832561a99d1478377cd1eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a764dd714365087dd12b50c522cadf739"><td class="memItemLeft" align="right" valign="top">const T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtpie_1_1file__stream.html#a764dd714365087dd12b50c522cadf739">peek</a> ()</td></tr>
<tr class="memdesc:a764dd714365087dd12b50c522cadf739"><td class="mdescLeft">&#160;</td><td class="mdescRight">Peeks next item from stream if can_read() == true.  <a href="classtpie_1_1file__stream.html#a764dd714365087dd12b50c522cadf739">More...</a><br /></td></tr>
<tr class="separator:a764dd714365087dd12b50c522cadf739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f4f97b0c1594e4e725e1e69c88630df"><td class="memItemLeft" align="right" valign="top"><a id="a5f4f97b0c1594e4e725e1e69c88630df"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>skip</b> ()</td></tr>
<tr class="separator:a5f4f97b0c1594e4e725e1e69c88630df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6b73745b37267e56c863f22b639f75"><td class="memItemLeft" align="right" valign="top"><a id="a7d6b73745b37267e56c863f22b639f75"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>skip_back</b> ()</td></tr>
<tr class="separator:a7d6b73745b37267e56c863f22b639f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a861737d269580f10261efd6a98660b"><td class="memTemplParams" colspan="2">template&lt;typename IT &gt; </td></tr>
<tr class="memitem:a4a861737d269580f10261efd6a98660b"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classtpie_1_1file__stream.html#a4a861737d269580f10261efd6a98660b">read</a> (IT const a, IT const b)</td></tr>
<tr class="memdesc:a4a861737d269580f10261efd6a98660b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Precondition: is_open().  <a href="classtpie_1_1file__stream.html#a4a861737d269580f10261efd6a98660b">More...</a><br /></td></tr>
<tr class="separator:a4a861737d269580f10261efd6a98660b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae441a8d3c28a753cabc7deade0dd1a37"><td class="memItemLeft" align="right" valign="top"><a id="ae441a8d3c28a753cabc7deade0dd1a37"></a>
const T &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>read_back</b> ()</td></tr>
<tr class="separator:ae441a8d3c28a753cabc7deade0dd1a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d5f7350385a630cc5d59f179cdec317"><td class="memItemLeft" align="right" valign="top"><a id="a4d5f7350385a630cc5d59f179cdec317"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>write</b> (const T &amp;item)</td></tr>
<tr class="separator:a4d5f7350385a630cc5d59f179cdec317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab936b218897204d95a9f6c37bb81fbe0"><td class="memTemplParams" colspan="2"><a id="ab936b218897204d95a9f6c37bb81fbe0"></a>
template&lt;typename IT &gt; </td></tr>
<tr class="memitem:ab936b218897204d95a9f6c37bb81fbe0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><b>write</b> (IT const a, IT const b)</td></tr>
<tr class="separator:ab936b218897204d95a9f6c37bb81fbe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a001d0b3ad821c749d3c2b36db80e3186"><td class="memItemLeft" align="right" valign="top"><a id="a001d0b3ad821c749d3c2b36db80e3186"></a>
static memory_size_type&#160;</td><td class="memItemRight" valign="bottom"><b>memory_usage</b> (double blockFactor=1.0) noexcept</td></tr>
<tr class="separator:a001d0b3ad821c749d3c2b36db80e3186"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
class tpie::file_stream&lt; T &gt;</h3>

<p>Compressed stream. </p>
<p>We assume that <code>T</code> is trivially copyable and that its copy constructor and assignment operator never throws.</p>
<p>As a rule of thumb, when a <code><a class="el" href="structtpie_1_1stream__exception.html">tpie::stream_exception</a></code> is thrown from a method, the stream is left in the state it was in prior to the method call. When a <code><a class="el" href="structtpie_1_1exception.html">tpie::exception</a></code> is thrown, the stream may have changed. In particular, the stream may have been closed, and it is up to the caller (if the exception is caught) to ensure that the stream is reopened as necessary.</p>
<p>Several methods claim the <code>nothrow</code> guarantee even though the implementation has <code>throw</code> statements. In this case, there are two reasons an exception may be thrown: A <code><a class="el" href="structtpie_1_1exception.html">tpie::exception</a></code> is thrown if some invariant in the stream has been violated, and this is a bug we must fix in the compressed stream. A <code><a class="el" href="structtpie_1_1stream__exception.html">tpie::stream_exception</a></code> is thrown if the user has violated a precondition (for instance by passing an invalid parameter). </p>

<p class="definition">Definition at line <a class="el" href="compressed_2predeclare_8h_source.html#l00049">49</a> of file <a class="el" href="compressed_2predeclare_8h_source.html">predeclare.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a764dd714365087dd12b50c522cadf739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a764dd714365087dd12b50c522cadf739">&#9670;&nbsp;</a></span>peek()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const T&amp; <a class="el" href="classtpie_1_1file__stream.html">tpie::file_stream</a>&lt; T &gt;::peek </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Peeks next item from stream if can_read() == true. </p>
<p>If can_read() == false, throws an <a class="el" href="structtpie_1_1end__of__stream__exception.html">end_of_stream_exception</a>.</p>
<p>Blocks to take the compressor lock.</p>
<p>If a <a class="el" href="structtpie_1_1stream__exception.html">stream_exception</a> is thrown, the stream is left in the state it was in before the call to <a class="el" href="classtpie_1_1file__stream.html#a764dd714365087dd12b50c522cadf739" title="Peeks next item from stream if can_read() == true.">peek()</a>. </p>

<p class="definition">Definition at line <a class="el" href="compressed_2stream_8h_source.html#l00451">451</a> of file <a class="el" href="compressed_2stream_8h_source.html">stream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                     {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">if</span> (m_cachedReads == 0) peak_unlikely();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>T*<span class="keyword">&gt;</span>(m_nextItem);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="af5f0c0a38832561a99d1478377cd1eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5f0c0a38832561a99d1478377cd1eb9">&#9670;&nbsp;</a></span>read() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const T&amp; <a class="el" href="classtpie_1_1file__stream.html">tpie::file_stream</a>&lt; T &gt;::read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads next item from stream if can_read() == true. </p>
<p>If can_read() == false, throws an <a class="el" href="structtpie_1_1end__of__stream__exception.html">end_of_stream_exception</a>.</p>
<p>Blocks to take the compressor lock.</p>
<p>If a <a class="el" href="structtpie_1_1stream__exception.html">stream_exception</a> is thrown, the stream is left in the state it was in before the call to <a class="el" href="classtpie_1_1file__stream.html#af5f0c0a38832561a99d1478377cd1eb9" title="Reads next item from stream if can_read() == true.">read()</a>. </p>

<p class="definition">Definition at line <a class="el" href="compressed_2stream_8h_source.html#l00425">425</a> of file <a class="el" href="compressed_2stream_8h_source.html">stream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                     {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> (m_cachedReads == 0) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            peak_unlikely();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keyword">const</span> T &amp; res = *<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>T*<span class="keyword">&gt;</span>(m_nextItem);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            ++m_offset;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            m_nextItem += <span class="keyword">sizeof</span>(T);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            cache_read_writes();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        --m_cachedReads;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        ++m_offset;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keyword">const</span> T &amp; res = *<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>T*<span class="keyword">&gt;</span>(m_nextItem);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        m_nextItem += <span class="keyword">sizeof</span>(T);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="pipelining_2file__stream_8h_source.html#l00070">tpie::pipelining::bits::input_t&lt; dest_t &gt;::go()</a>, <a class="el" href="pipelining_2buffer_8h_source.html#l00139">tpie::pipelining::bits::buffer_output_t&lt; dest_t &gt;::go()</a>, <a class="el" href="compressed_2stream_8h_source.html#l00471">tpie::file_stream&lt; tpie::stream_position &gt;::read()</a>, <a class="el" href="sort__manager_8h_source.html#l00176">tpie::sort_manager&lt; T, I, M &gt;::sort()</a>, and <a class="el" href="internal__sort_8h_source.html#l00202">tpie::ami::Internal_Sorter_Obj&lt; T, Compare &gt;::sort()</a>.</p>

</div>
</div>
<a id="a4a861737d269580f10261efd6a98660b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a861737d269580f10261efd6a98660b">&#9670;&nbsp;</a></span>read() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<div class="memtemplate">
template&lt;typename IT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classtpie_1_1file__stream.html">tpie::file_stream</a>&lt; T &gt;::read </td>
          <td>(</td>
          <td class="paramtype">IT const&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IT const&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Precondition: is_open(). </p>
<p>Reads min(b-a, size()-offset()) items into the range [a, b). If less than b-a items are read, throws an <a class="el" href="structtpie_1_1end__of__stream__exception.html">end_of_stream_exception</a>. </p>

<p class="definition">Definition at line <a class="el" href="compressed_2stream_8h_source.html#l00471">471</a> of file <a class="el" href="compressed_2stream_8h_source.html">stream.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                                      {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">for</span> (IT i = a; i != b; ++i) *i = <a class="code" href="classtpie_1_1file__stream.html#af5f0c0a38832561a99d1478377cd1eb9">read</a>();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>compressed/<a class="el" href="compressed_2predeclare_8h_source.html">predeclare.h</a></li>
<li>compressed/<a class="el" href="compressed_2stream_8h_source.html">stream.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclasstpie_1_1file__stream_html_af5f0c0a38832561a99d1478377cd1eb9"><div class="ttname"><a href="classtpie_1_1file__stream.html#af5f0c0a38832561a99d1478377cd1eb9">tpie::file_stream::read</a></div><div class="ttdeci">const T &amp; read()</div><div class="ttdoc">Reads next item from stream if can_read() == true.</div><div class="ttdef"><b>Definition:</b> <a href="compressed_2stream_8h_source.html#l00425">stream.h:425</a></div></div>
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
      <li class="footer">from TPIE 4739728 (<a href="//github.com/thomasmoelhave/tpie/tree/4739728">browse source</a>). Generated on Mon May 23 2022 23:38:36 by
<a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.17 </li>
    </ul>
  </div>
</body>
</html>
